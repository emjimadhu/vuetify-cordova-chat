webpackJsonp([2],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),r=a("3EgV"),n=a.n(r),o=a("30Z5"),i=a.n(o),l={name:"App",created:function(){var e=JSON.parse(localStorage.getItem("authUser"));e&&this.$store.commit("SET_AUTHUSER",e)}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{dark:""}},[t("v-content",[t("router-view")],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("fJ5M")},null,null).exports,m=a("/ocq"),d=a("Dd8w"),h=a.n(d),g=a("NYxO"),p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{staticStyle:{height:"48px"},attrs:{fixed:"",app:""}},[a("v-toolbar",[a("v-flex",{attrs:{xs11:""}},[a("v-text-field",{attrs:{label:"Enter your Message","single-line":"","hide-details":""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",icon:""},on:{click:e.sendMessage}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[e._v("send")])],1)],1)],1)],1)},staticRenderFns:[]},f=a("VU/8")({name:"chat-input",computed:{message:{get:function(){return this.$store.getters.message},set:function(e){this.$store.commit("SET_MESSAGE",e)}}},methods:{sendMessage:function(){this.$emit("sendMessage")}}},p,!1,null,null,null).exports,v={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-snackbar",{attrs:{timeout:e.timeout,color:e.alertColor,top:"",right:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n  "+e._s(e.alertMSG)+"\n")])},staticRenderFns:[]},S=a("VU/8")({name:"global-alert",props:["alertColor","alert","alertMSG"],data:function(){return{timeout:6e3}}},v,!1,null,null,null).exports,_={name:"chat-window",components:{"chat-input":f,"global-alert":S},computed:h()({},Object(g.b)({messages:"messages"})),data:function(){return{alert:!1,alertColor:"",alertMSG:""}},methods:{sendMessage:function(){var e=this.$store.getters.authUser,t={text:this.$store.getters.message,image:"https://pbs.twimg.com/profile_images/378800000719389786/d630c788dd75aa3fadffe1408f3a6932.jpeg",name:e.displayName,date:new Date};this.$socket.emit("send",t),this.$store.commit("SET_MESSAGE","")},escapeRegExp:function(e){return e.replace(/[*+?^${}()|[\]\\]/g,"\\$&")}},socket:{events:{hello:function(e){e&&(this.alert=!0,this.alertColor="success",this.alertMSG="Welcome to Gotham City.")},message:function(e){var t=JSON.parse(localStorage.getItem("authUser")),a=this.$store.getters.messages;t.displayName===e.name?e.owner=!0:e.owner=!1,a.push(e)}}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{staticClass:"chat-window",attrs:{fluid:"",id:"chat-window"}},e._l(e.messages,function(t,s){return a("v-layout",{key:s,staticClass:"bottom pb-3",class:{right:t.owner,left:!t.owner},attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",{class:{"deep-orange":!t.owner},attrs:{flat:""}},[a("v-card-text",[t.owner?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-2",attrs:{xs11:""}},[a("h4",{staticClass:"text-xs-right"},[e._v(e._s(t.text))]),e._v(" "),a("p",{staticStyle:{position:"absolute",bottom:"-12px","font-size":"10px"}},[e._v(e._s(t.date)+" - "+e._s(t.name))])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-avatar",{staticClass:"white",attrs:{size:"32px"}},[a("img",{attrs:{src:t.image}})])],1)],1):e._e(),e._v(" "),t.owner?e._e():a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-avatar",{staticClass:"white",attrs:{size:"32px"}},[a("img",{attrs:{src:t.image}})])],1),e._v(" "),a("v-flex",{staticClass:"pl-3",attrs:{xs11:""}},[a("h4",[e._v(e._s(t.text))]),e._v(" "),a("p",{staticStyle:{position:"absolute",bottom:"-12px","font-size":"10px"}},[e._v(e._s(t.date)+" - "+e._s(t.name))])])],1)],1)],1)],1)],1)})),e._v(" "),a("chat-input",{on:{sendMessage:e.sendMessage}}),e._v(" "),a("global-alert",{attrs:{alert:e.alert,alertColor:e.alertColor,alertMSG:e.alertMSG}})],1)},staticRenderFns:[]};var b=a("VU/8")(_,w,!1,function(e){a("ea9b")},"data-v-3c0dab24",null).exports,x=a("mvHQ"),E=a.n(x),y=a("Sazm"),U=a.n(y),M={name:"login",components:{"global-alert":S},data:function(){return{alert:!1,alertColor:"",alertMSG:"",username:""}},methods:{signin:function(){if(""!==this.username){var e={displayName:this.username};localStorage.setItem("authUser",E()(e)),this.$store.commit("SET_AUTHUSER",e),this.$router.push({name:"chat-window"})}else this.alert=!0,this.alertColor="error",this.alertMSG="Username is Required"},googleLogin:function(){var e=this,t=new U.a.auth.GoogleAuthProvider;U.a.auth().signInWithRedirect(t).then(function(e){return localStorage.setItem("result",E()(e)),U.a.auth().getRedirectResult()}).then(function(t){if(t.credential){var a=t.user,s={id:a.uid,displayName:a.displayName,email:a.email,phoneNumber:a.phoneNumber,photoURL:a.photoURL,googleLogin:!0,facebookLogin:!1};localStorage.setItem("authUser",E()(s)),e.$store.commit("SET_AUTHUSER",s),e.$router.push({name:"chat-window"})}}).catch(function(t){e.alert=!0,e.alertColor="error";var a=t.code,s=t.message,r=t.email;"auth/account-exists-with-different-credential"===a?U.a.auth().fetchProvidersForEmail(r).then(function(t){e.alertMSG="It seems you already used this email to login with Facebook. Please use Facebook Signin instead."}):e.alertMSG="auth/email-already-in-use"===a?"This Email is already used for other Account.":s})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-card",{staticClass:"pa-4",attrs:{color:"white"}},[a("v-card-text",[a("h3",{staticClass:"primary--text"},[e._v("Login")])]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-text-field",{attrs:{label:"Username",required:"",light:""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.signin(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{color:"red",block:""},on:{click:e.googleLogin}},[e._v("\n            sign in with google\n          ")])],1)],1),e._v(" "),a("v-layout",{attrs:{row:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.signin}},[e._v("\n          Login\n        ")])],1)],1)],1),e._v(" "),a("global-alert",{attrs:{alert:e.alert,alertColor:e.alertColor,alertMSG:e.alertMSG}})],1)},staticRenderFns:[]};var C=a("VU/8")(M,k,!1,function(e){a("u0ir")},"data-v-6dcc1bb8",null).exports;s.a.use(m.a);var G=new m.a({routes:[{path:"/",name:"login",component:C,beforeEnter:function(e,t,a){localStorage.getItem("authUser")?a({name:"chat-window"}):a()}},{path:"/chat",name:"chat-window",component:b,beforeEnter:function(e,t,a){localStorage.getItem("authUser")?a():a({name:"login"})}}]}),$={state:{authUser:null},getters:{authUser:function(e){return e.authUser}},mutations:{SET_AUTHUSER:function(e,t){e.authUser=t}}},A={state:{messages:[]},getters:{messages:function(e){return e.messages}},mutations:{SET_MESSAGES:function(e,t){e.messages=t}},actions:{MESSAGES_ACTION:function(e,t){(0,e.commit)("SET_MESSAGES",t)}}},R={state:{message:""},getters:{message:function(e){return e.message}},mutations:{SET_MESSAGE:function(e,t){e.message=t}}};s.a.use(g.a);var T=new g.a.Store({modules:{login:$,chats:A,input:R}}),I={apiKey:"AIzaSyDvukohCmNdhUFi1i_4E035lQsczI1hbqg",authDomain:"chatly-16eef.firebaseapp.com",databaseURL:"https://chatly-16eef.firebaseio.com",projectId:"chatly-16eef",storageBucket:"chatly-16eef.appspot.com",messagingSenderId:"398399584439"};a.e(0).then(a.bind(null,"7zck")),s.a.use(n.a),s.a.use(i.a,"https://shielded-savannah-59227.herokuapp.com/"),s.a.config.productionTip=!1;document.addEventListener("deviceready",function(){new s.a({el:"#app",router:G,store:T,components:{App:u},created:function(){U.a.initializeApp(I)},template:"<App/>"})}),void 0!==window.cordova||document.dispatchEvent(new CustomEvent("deviceready",{}))},ea9b:function(e,t){},fJ5M:function(e,t){},u0ir:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2b7c2b9b42f26ede7064.js.map