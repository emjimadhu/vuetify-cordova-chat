webpackJsonp([2],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("3EgV"),o=a.n(i),r=a("30Z5"),n=a.n(r),l={name:"App",created:function(){var t=JSON.parse(localStorage.getItem("authUser"));t&&this.$store.commit("SET_AUTHUSER",t)}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{dark:""}},[e("v-content",[e("router-view")],1)],1)},staticRenderFns:[]};var v=a("VU/8")(l,c,!1,function(t){a("fJ5M")},null,null).exports,u=a("/ocq"),m=a("Dd8w"),d=a.n(m),p=a("NYxO"),h=a("Sazm"),f=a.n(h),g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{staticStyle:{height:"48px"},attrs:{fixed:"",app:""}},[a("v-toolbar",[a("v-flex",{attrs:{xs11:""}},[a("v-text-field",{attrs:{label:"Enter your Message","single-line":"","hide-details":""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.sendMessage(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",icon:""},on:{click:t.sendMessage}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[t._v("send")])],1)],1)],1)],1)},staticRenderFns:[]},_=a("VU/8")({name:"chat-input",computed:{message:{get:function(){return this.$store.getters.message},set:function(t){this.$store.commit("SET_MESSAGE",t)}}},methods:{sendMessage:function(){this.$emit("sendMessage")}}},g,!1,null,null,null).exports,S={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-snackbar",{attrs:{timeout:t.timeout,color:t.alertColor,top:"",right:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n  "+t._s(t.alertMSG)+"\n")])},staticRenderFns:[]},w=a("VU/8")({name:"global-alert",props:["alertColor","alert","alertMSG"],data:function(){return{timeout:6e3}}},S,!1,null,null,null).exports,b={name:"chat-window",components:{"chat-input":_,"global-alert":w},computed:d()({},Object(p.b)({messages:"messages"})),data:function(){return{alert:!1,alertColor:"",alertMSG:"",clipped:!1,drawer:!1,miniVariant:!1}},methods:{sendMessage:function(){var t=this.$store.getters.authUser,e={text:this.$store.getters.message,image:t.photoURL,name:t.displayName,date:new Date};this.$socket.emit("send",e),this.$store.commit("SET_MESSAGE","")},logout:function(){var t=this;f.a.auth().signOut().then(function(){localStorage.removeItem("authUser"),t.$store.commit("SET_AUTHUSER",""),t.$router.push({name:"login"})}).catch(function(e){t.alert=!0,t.alertColor="error",t.alertMSG=e.message})}},socket:{events:{message:function(t){var e=JSON.parse(localStorage.getItem("authUser")),a=this.$store.getters.messages;e.displayName===t.name?t.owner=!0:t.owner=!1,a.push(t)}}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{persistent:"","mini-variant":t.miniVariant,clipped:t.clipped,"enable-resize-watcher":"",fixed:"",app:"",width:"200"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",[a("v-list-tile",{attrs:{to:{name:"profile"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Profile")])],1)],1),t._v(" "),a("v-list-tile",{on:{click:t.logout}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Logout")])],1)],1)],1)],1),t._v(" "),a("v-toolbar",{attrs:{fixed:"",app:""}},[a("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),a("v-toolbar-title",[t._v("Chatly")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:"",to:{name:"profile"}}},[t._v("Profile")]),t._v(" "),a("v-btn",{attrs:{flat:""},on:{click:t.logout}},[t._v("Logout")])],1)],1),t._v(" "),a("v-container",{staticClass:"chat-window",attrs:{fluid:"",id:"chat-window"}},t._l(t.messages,function(e,s){return a("v-layout",{key:s,staticClass:"bottom pb-3",class:{right:e.owner,left:!e.owner},attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",{class:{"deep-orange":!e.owner},attrs:{flat:""}},[a("v-card-text",[e.owner?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-2",attrs:{xs11:""}},[a("h4",{staticClass:"text-xs-right"},[t._v(t._s(e.text))]),t._v(" "),a("p",{staticStyle:{position:"absolute",bottom:"-12px","font-size":"10px"}},[t._v(t._s(e.date)+" - "+t._s(e.name))])]),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-avatar",{staticClass:"white",attrs:{size:"32px"}},[a("img",{attrs:{src:e.image}})])],1)],1):t._e(),t._v(" "),e.owner?t._e():a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-avatar",{staticClass:"white",attrs:{size:"32px"}},[a("img",{attrs:{src:e.image}})])],1),t._v(" "),a("v-flex",{staticClass:"pl-3",attrs:{xs11:""}},[a("h4",[t._v(t._s(e.text))]),t._v(" "),a("p",{staticStyle:{position:"absolute",bottom:"-12px","font-size":"10px"}},[t._v(t._s(e.date)+" - "+t._s(e.name))])])],1)],1)],1)],1)],1)})),t._v(" "),a("chat-input",{on:{sendMessage:t.sendMessage}}),t._v(" "),a("global-alert",{attrs:{alert:t.alert,alertColor:t.alertColor,alertMSG:t.alertMSG}})],1)},staticRenderFns:[]};var E=a("VU/8")(b,x,!1,function(t){a("jM/j")},"data-v-642a5cbe",null).exports,U=a("mvHQ"),y=a.n(U),M={name:"login",components:{"global-alert":w},data:function(){return{alert:!1,alertColor:"",alertMSG:"",username:""}},methods:{signin:function(){if(""!==this.username){var t={displayName:this.username};localStorage.setItem("authUser",y()(t)),this.$store.commit("SET_AUTHUSER",t),this.$router.push({name:"chat-window"})}else this.alert=!0,this.alertColor="error",this.alertMSG="Username is Required"},googleLogin:function(){var t=this,e=new f.a.auth.GoogleAuthProvider;f.a.auth().signInWithRedirect(e).then(function(t){return localStorage.setItem("result",y()(t)),f.a.auth().getRedirectResult()}).then(function(e){if(e.credential){var a=e.user,s={id:a.uid,displayName:a.displayName,email:a.email,phoneNumber:a.phoneNumber,photoURL:a.photoURL,googleLogin:!0,facebookLogin:!1};localStorage.setItem("authUser",y()(s)),t.$store.commit("SET_AUTHUSER",s),t.$router.push({name:"chat-window"})}}).catch(function(e){console.log(e),t.alert=!0,t.alertColor="error";var a=e.code,s=e.message,i=e.email;"auth/account-exists-with-different-credential"===a?f.a.auth().fetchProvidersForEmail(i).then(function(e){t.alertMSG="It seems you already used this email to login with Facebook. Please use Facebook Signin instead."}):t.alertMSG="auth/email-already-in-use"===a?"This Email is already used for other Account.":s})}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-card",{staticClass:"pa-4",attrs:{color:"white"}},[a("v-card-text",[a("h3",{staticClass:"primary--text"},[t._v("Login")])]),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{color:"red",block:""},on:{click:t.googleLogin}},[t._v("\n            sign in with google\n          ")])],1)],1)],1)],1),t._v(" "),a("global-alert",{attrs:{alert:t.alert,alertColor:t.alertColor,alertMSG:t.alertMSG}})],1)},staticRenderFns:[]};var k=a("VU/8")(M,C,!1,function(t){a("tf5l")},"data-v-1df37e40",null).exports,$={name:"profile",data:function(){return{profileImg:JSON.parse(localStorage.getItem("authUser")).photoURL,profileName:JSON.parse(localStorage.getItem("authUser")).displayName}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("v-card-media",{attrs:{src:t.profileImg,height:"300px"}},[a("v-layout",{staticClass:"media",attrs:{column:""}},[a("v-card-title",[a("v-btn",{attrs:{dark:"",icon:"",to:{name:"chat-window"}}},[a("v-icon",[t._v("chevron_left")])],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-card-title",{staticClass:"white--text pl-5 pt-5"},[a("div",{staticClass:"display-1 pl-5 pt-5"},[t._v(t._s(t.profileName))])])],1)],1),t._v(" "),a("v-list",{attrs:{"two-line":""}},[a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:"indigo"}},[t._v("phone")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("(650) 555-1234")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Mobile")])],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-action"),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("(323) 555-6789")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Work")])],1)],1),t._v(" "),a("v-divider",{attrs:{inset:""}}),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:"indigo"}},[t._v("mail")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("aliconnors@example.com")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Personal")])],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-action"),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("ali_connors@example.com")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Work")])],1)],1),t._v(" "),a("v-divider",{attrs:{inset:""}}),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:"indigo"}},[t._v("location_on")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("1400 Main Street")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Orlando, FL 79938")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")($,I,!1,function(t){a("PLpU")},"data-v-38a80836",null).exports;s.a.use(u.a);var A=new u.a({routes:[{path:"/",name:"login",component:k,beforeEnter:function(t,e,a){localStorage.getItem("authUser")?a({name:"chat-window"}):a()}},{path:"/chat",name:"chat-window",component:E,beforeEnter:function(t,e,a){localStorage.getItem("authUser")?a():a({name:"login"})}},{path:"/profile",name:"profile",component:R,beforeEnter:function(t,e,a){localStorage.getItem("authUser")?a():a({name:"login"})}}]}),G={state:{authUser:null},getters:{authUser:function(t){return t.authUser}},mutations:{SET_AUTHUSER:function(t,e){t.authUser=e}}},N={state:{messages:[]},getters:{messages:function(t){return t.messages}},mutations:{SET_MESSAGES:function(t,e){t.messages=e}},actions:{MESSAGES_ACTION:function(t,e){(0,t.commit)("SET_MESSAGES",e)}}},T={state:{message:""},getters:{message:function(t){return t.message}},mutations:{SET_MESSAGE:function(t,e){t.message=e}}};s.a.use(p.a);var L=new p.a.Store({modules:{login:G,chats:N,input:T}}),z={apiKey:"AIzaSyDvukohCmNdhUFi1i_4E035lQsczI1hbqg",authDomain:"chatly-16eef.firebaseapp.com",databaseURL:"https://chatly-16eef.firebaseio.com",projectId:"chatly-16eef",storageBucket:"chatly-16eef.appspot.com",messagingSenderId:"398399584439"};a.e(0).then(a.bind(null,"7zck")),s.a.use(o.a),s.a.use(n.a,"https://shielded-savannah-59227.herokuapp.com/"),s.a.config.productionTip=!1;document.addEventListener("deviceready",function(){new s.a({el:"#app",router:A,store:L,components:{App:v},created:function(){f.a.initializeApp(z)},template:"<App/>"})}),void 0!==window.cordova||document.dispatchEvent(new CustomEvent("deviceready",{}))},PLpU:function(t,e){},fJ5M:function(t,e){},"jM/j":function(t,e){},tf5l:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2f746b45d310ddce9770.js.map